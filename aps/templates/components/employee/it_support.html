{% extends 'base.html' %}

{% block title %}IT Support - APS Portal{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-thin text-gray-800 mb-6">IT Support</h1>

    <!-- Internal Navigation -->
    <div class="bg-white p-4 rounded-lg shadow-lg mb-6">
        <nav class="flex space-x-6">
            <a href="#section1" class="nav-link text-lg font-semibold text-gray-700 transition-all duration-300 hover:text-yellow-500" 
               data-section="section1">Raise Ticket</a>
            <a href="#section2" class="nav-link text-lg font-semibold text-gray-700 transition-all duration-300 hover:text-yellow-500" 
               data-section="section2">Change Password</a>
        </nav>
    </div>

    <!-- Sections -->
    <section id="section1" class="section mb-12">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Raise an IT Support Ticket</h2>
            <form method="post" action="{% url 'aps_employee:create_ticket' %}">
                {% csrf_token %}
                <div class="mb-4">
                    <label for="issue_type" class="block text-gray-600 mb-2">Issue Type:</label>
                    <select id="issue_type" name="issue_type" class="block w-full p-3 border border-gray-300 rounded-md">
                        <option value="Hardware Issue">Hardware Issue</option>
                        <option value="Software Issue">Software Issue</option>
                        <option value="Network Issue">Network Issue</option>
                        <option value="Internet Issue">Internet Issue</option>
                        <option value="Application Issue">Application Issue</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="description" class="block text-gray-600 mb-2">Description:</label>
                    <textarea id="description" name="description" class="block w-full p-3 border border-gray-300 rounded-md" placeholder="Enter issue description here."></textarea>
                </div>
                <button type="submit" class="bg-yellow-400 text-white py-2 px-6 rounded-md hover:bg-yellow-600 hover:text-yellow-100 transition-all duration-300">
                    Submit Ticket
                </button>
            </form>
        </div>
    </section>

    <section id="section2" class="section mb-12 hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Change Password</h2>
            <form method="post" action="{% url 'aps_employee:change_password' %}">
                {% csrf_token %}
                <div class="mb-4">
                    <label for="current_pwd" class="block text-gray-600 mb-2">Current Password:</label>
                    <input type="password" id="current_pwd" name="current_pwd" class="block w-full p-3 border border-gray-300 rounded-md">
                </div>
                <div class="mb-4">
                    <label for="new_pwd" class="block text-gray-600 mb-2">New Password:</label>
                    <input type="password" id="new_pwd" name="new_pwd" class="block w-full p-3 border border-gray-300 rounded-md">
                </div>
                <div class="mb-4">
                    <label for="confirm_pwd" class="block text-gray-600 mb-2">Confirm Password:</label>
                    <input type="password" id="confirm_pwd" name="confirm_pwd" class="block w-full p-3 border border-gray-300 rounded-md">
                </div>
                <button type="submit" class="bg-yellow-400 text-white py-2 px-6 rounded-md hover:bg-yellow-600 hover:text-yellow-100 transition-all duration-300">
                    Change Password
                </button>
            </form>
        </div>
    </section>
</div>

<!-- JavaScript -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');

        // Add click event listeners to navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault(); // Prevent default anchor behavior
                const targetSection = this.getAttribute('data-section');

                // Hide all sections
                sections.forEach(section => section.classList.add('hidden'));

                // Show the target section
                document.getElementById(targetSection).classList.remove('hidden');
            });
        });
    });
</script>

<!-- CSS -->
<style>
    .hidden {
        display: none;
    }

    .nav-link:hover {
        color: #fbbf24; /* Bright yellow for hover effect */
    }

    /* Make the buttons a bit more rounded */
    .btn {
        border-radius: 8px;
    }

    .bg-yellow-400 {
        background-color: #fbbf24; /* Bright yellow */
    }
</style>
{% endblock %}
